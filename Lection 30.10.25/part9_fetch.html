<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <title>GitHub Commits Fetch</title>
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4">üìä GitHub Commits</h1>
        <div class="text-center mb-3">
            <button class="btn btn-primary" onclick="loadCommits()">üîÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–º–º–∏—Ç—ã</button>
        </div>
        <div id="output"></div>
        <div id="loading" class="text-center" style="display: none;">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
            <p class="mt-2">–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...</p>
        </div>
    </div>

    <script>
        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–º–∏—Ç–æ–≤
        async function loadCommits() {
            const output = document.getElementById('output');
            const loading = document.getElementById('loading');
            
            try {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                loading.style.display = 'block';
                output.innerHTML = '';
                
                let url = 'https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits';
                let response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                let commits = await response.json();
                
                // –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–º–∏—Ç–∞—Ö –≤ –∫–æ–Ω—Å–æ–ª—å
                console.log('–í—Å–µ –∫–æ–º–º–∏—Ç—ã:', commits);
                console.log('–ü–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç:', commits[0]);
                console.log('–ê–≤—Ç–æ—Ä –ø–µ—Ä–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞:', commits[0].author.login);
                
                // –í—ã–≤–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
                displayCommits(commits);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                output.innerHTML = `
                    <div class="alert alert-danger">
                        <h4>‚ùå –û—à–∏–±–∫–∞!</h4>
                        <p>${error.message}</p>
                    </div>
                `;
            } finally {
                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                loading.style.display = 'none';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function displayCommits(commits) {
            const output = document.getElementById('output');
            
            if (commits.length === 0) {
                output.innerHTML = '<div class="alert alert-warning">–ö–æ–º–º–∏—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 5 –∫–æ–º–º–∏—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const recentCommits = commits.slice(0, 5);
            
            output.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0">üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã</h4>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">–í—Å–µ–≥–æ –∫–æ–º–º–∏—Ç–æ–≤: <strong>${commits.length}</strong></p>
                        
                        ${recentCommits.map(commit => `
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h5 class="card-title">${commit.commit.message.split('\n')[0]}</h5>
                                    <p class="card-text">
                                        <strong>üë§ –ê–≤—Ç–æ—Ä:</strong> ${commit.author?.login || commit.commit.author.name}<br>
                                        <strong>üìÖ –î–∞—Ç–∞:</strong> ${new Date(commit.commit.author.date).toLocaleString()}<br>
                                        <strong>üîó SHA:</strong> <code>${commit.sha.substring(0, 7)}</code>
                                    </p>
                                    <a href="${commit.html_url}" target="_blank" class="btn btn-sm btn-outline-primary">
                                        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ GitHub
                                    </a>
                                </div>
                            </div>
                        `).join('')}
                        
                        ${commits.length > 5 ? `
                            <div class="text-center">
                                <small class="text-muted">–ü–æ–∫–∞–∑–∞–Ω–æ 5 –∏–∑ ${commits.length} –∫–æ–º–º–∏—Ç–æ–≤</small>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–∏—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            loadCommits();
        });
    </script>
</body>
</html>